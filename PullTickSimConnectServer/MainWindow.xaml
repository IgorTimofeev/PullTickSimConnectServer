<Window
	x:Class="PullTickSimConnectServer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:PullTickSimConnectServer"
    mc:Ignorable="d"
	
	Title="Charlotte SimConnecto(R)"
	
	Width="327"
	Height="133"
	
	WindowStyle="None"
	WindowStartupLocation="CenterScreen"
	ResizeMode="NoResize"
	
	AllowsTransparency="True"
	Background="Transparent"
>
	<WindowChrome.WindowChrome>
		<WindowChrome
			CaptionHeight="0"
			CornerRadius="0"
			GlassFrameThickness="0"
			ResizeBorderThickness="3"
		/>
	</WindowChrome.WindowChrome>

	<Grid
		Margin="20"
	>
		<Rectangle
			RadiusX="10"
			RadiusY="10"
			Fill="{StaticResource ThemeBg1}"
			MouseDown="OnTopPanelMouseDown"
		>
			<Rectangle.Effect>
				<DropShadowEffect
					BlurRadius="20"
					Opacity="0.3"
					Color="#000"	
				/>
			</Rectangle.Effect>
		</Rectangle>

		<Grid
			Grid.Row="1"
			Margin="15,3,12,0"
		>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>
		
			<StackPanel
				
			>
				<TextBlock
					Style="{StaticResource TitleTextBlock}"
					IsHitTestVisible="false"
					Text="Status"
				/>

				<Grid
					Width="12"
					Height="12"
					Margin="0,15,0,0"
				>
					<Ellipse
						x:Name="MainEllipse"
						Fill="#00FF00"
					/>

					<Ellipse
						Fill="{Binding Fill, ElementName=MainEllipse}"
						Opacity="1"
						RenderTransformOrigin="0.5,0.5"
					>
						<Ellipse.RenderTransform>
							<ScaleTransform ScaleX="1" ScaleY="{Binding ScaleX, RelativeSource={RelativeSource Mode=Self}}"/>
						</Ellipse.RenderTransform>
	
						<Ellipse.Triggers>
							<EventTrigger RoutedEvent="Loaded">
								<BeginStoryboard>
									<Storyboard>
										<DoubleAnimation
											Storyboard.TargetProperty="(Ellipse.RenderTransform).(ScaleTransform.ScaleX)"
											To="10"
											Duration="0:0:1"
											RepeatBehavior="Forever"
										/>
					
										<DoubleAnimation
											Storyboard.TargetProperty="Opacity"
											To="0"
											Duration="0:0:1"
											RepeatBehavior="Forever"
										/>
									</Storyboard>
								</BeginStoryboard>
							</EventTrigger>
						</Ellipse.Triggers>
					</Ellipse>
				
					<Grid.ToolTip>
						<ToolTip
							Style="{StaticResource ToolTip}"	
						>
							<StackPanel>
								<TextBlock
									x:Name="SimStatusTextBlock"
									Text="SimConnect is running"
								/>
					
								<TextBlock
									x:Name="TCPStatusTextBlock"
									Margin="0,5,0,0"
									Text="TCP server is running"
								/>
							</StackPanel>
						</ToolTip>
					</Grid.ToolTip>
				</Grid>
			</StackPanel>
			
			<StackPanel
				Grid.Column="1"
				Margin="15,0,15,0"
			>
			
				<TextBlock
					x:Name="PortTitle"
					Style="{StaticResource TitleTextBlock}"
					IsHitTestVisible="false"
					Text="Server port"
				/>
			
				<TextBox
					x:Name="PortTextBox"
					Style="{StaticResource TextBox}"
					Text="25569"
					KeyUp="OnPortTextBoxKeyUp"
					LostFocus="OnPortTextBoxLostFocus"
				/>
			</StackPanel>
		
			<StackPanel
				Grid.Column="2"
				Orientation="Horizontal"
				VerticalAlignment="Center"
			>
				<Button
					x:Name="WindowMinimizeButton"
					Style="{StaticResource WindowActionButton}"
					Content="-"
					Click="OnWindowMinimizeButtonClick"
				/>
			
				<Button
					x:Name="WindowCloseButton"
					Style="{StaticResource WindowCloseButton}"
					Margin="10,0,0,0"
					Content="X"
					Click="OnWindowCloseButtonClick"
				/>
			</StackPanel>
		</Grid>
	</Grid>
</Window>